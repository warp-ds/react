import{j as u,l as E,n as i}from"./index-DSOYRR-y.js";import{r as l}from"./index-RYns6xqu.js";import{r as O}from"./index.m-CtIADANO.js";import{i as S}from"./index-C6dB-k_R.js";import{u as T,H as $}from"./help-text-BWbwCBp4.js";import{a as A}from"./i18n-BJez-btc.js";const P=typeof window<"u"?l.useLayoutEffect:l.useEffect,F=JSON.parse('{"textarea.label.optional":["(valgfrit)"]}'),J=JSON.parse('{"textarea.label.optional":["(optional)"]}'),_=JSON.parse('{"textarea.label.optional":["(valinnainen)"]}'),L=JSON.parse('{"textarea.label.optional":["(valgfritt)"]}'),V=JSON.parse('{"textarea.label.optional":["(valfritt)"]}');function C({ref:t,value:n,minimumRows:c,maximumRows:s}){const p=l.useRef(-1/0),h=l.useRef(1/0),m=n!==void 0;function d(e){e.style.setProperty("height","auto");let a=Math.max(p.current,e.scrollHeight);a=Math.min(h.current,a),e.style.setProperty("height",a+"px")}P(()=>{if(t.current&&(c||s)){const e=getComputedStyle(t.current),a=parseFloat(e.getPropertyValue("line-height")),o=parseFloat(e.getPropertyValue("padding-top")),b=parseFloat(e.getPropertyValue("padding-bottom")),f=parseFloat(e.getPropertyValue("border-bottom-width")),g=o+b+f;c&&(p.current=a*c+g),s&&(h.current=a*s+g)}},[t,s,c]),P(()=>{t.current&&d(t.current)},[t,n]),l.useEffect(()=>{if(!t.current&&m)return;const e=t.current,a=()=>{d(e)};return e.addEventListener("input",a),()=>e.removeEventListener("input",a)},[t,m])}const z=l.forwardRef((t,n)=>{const{className:c,disabled:s,helpText:p,id:h,invalid:m,label:d,maximumRows:e,minimumRows:a,readOnly:o,style:b,value:f,optional:g,placeholder:N,...j}=t;A(J,L,_,F,V);const y=T(h),I=l.useRef(null),x=p?`${y}__hint`:void 0,r=m,H=O([i.base,i.textArea,!!N&&i.placeholder,!r&&!s&&!o&&i.default,r&&!s&&!o&&i.invalid,!r&&s&&!o&&i.disabled,!r&&!s&&o&&i.readOnly]);return C({ref:I,value:f,maximumRows:e,minimumRows:a}),u.jsxs("div",{className:c,style:b,children:[d&&u.jsxs("label",{htmlFor:y,className:E.base,children:[d,g&&u.jsx("span",{className:E.optional,children:S._({id:"textarea.label.optional",message:"(optional)",comment:"Shown behind label when marked as optional"})})]}),u.jsx("textarea",{className:H,...j,placeholder:N,"aria-describedby":x,"aria-errormessage":r&&x?x:void 0,"aria-invalid":r,disabled:s,id:y,ref:v=>{I.current=v,n&&(typeof n=="function"?n(v):n.current=v)},readOnly:o,value:f}),t.helpText&&u.jsx($,{helpId:x,helpText:p,isInvalid:r})]})});z.__docgenInfo={description:"A textarea component that automatically resizes as content changes.",methods:[],displayName:"TextArea"};export{z as T};
