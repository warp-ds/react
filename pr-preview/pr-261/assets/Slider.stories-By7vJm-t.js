import{j as r,d as g}from"./index-BXOgzrE8.js";import{r as s}from"./index-RYns6xqu.js";import{r as R}from"./index.m-CtIADANO.js";const te=()=>{let e;const t=o=>d=>{const{left:p,width:x}=d[0].target.getBoundingClientRect();o({left:p,width:x-24})};return{mountedHook:(o,d)=>{d(o.getBoundingClientRect()),e=new ResizeObserver(t(d)),e.observe(o)},unmountedHook:()=>{e.disconnect()}}},c=Object.freeze({up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",pageup:"PageUp",pagedown:"PageDown"}),ne=Object.values(c),q={passive:!0};function ae(e,t=2){const n=t?Math.pow(10,t):1;return Math.round(e*n)/n}const se=e=>Number.isFinite(parseFloat(e)),oe=(e,{min:t,max:n})=>se(e)?Math.min(Math.max(Number(e),t),n):t;let T={counter:0,repeatsBeforeAcceleration:3};function ue({props:e,sliderState:t}){const n=a=>oe(a,{max:e.max,min:e.min});function f(a){const{left:u,width:m}=t.dimensions,v="touches"in a?a.touches[0].clientX:a.clientX;let h=Math.min(Math.max((v-u-16)/m,0),1)||0;return{value:e.min+h*(e.max-e.min)}}const o=()=>(t.position-e.min)/(e.max-e.min)*100,d=()=>o()/100*t.dimensions.width,p=a=>{const u=1/t.step;return Math.floor(a*u)/u};function x(a){const u=a.key;if(!(e.disabled||!ne.includes(u)))switch(a.preventDefault(),u){case c.left:case c.right:case c.up:case c.down:{const m=u===c.right||u===c.up?1:-1;let v=t.step;if(!e.preventAcceleration)if(a.repeat){T.counter++;const h=Math.min((T.counter-T.repeatsBeforeAcceleration)/100,.2);v=Math.max(t.step,Math.ceil((m>0?e.max-t.val:t.val-e.min)*h))}else T.counter=0;t.position=n(t.val+m*v);break}case c.home:t.position=e.min;break;case c.end:t.position=e.max;break;case c.pageup:case c.pagedown:{const m=u===c.pageup?1:-1,v=2,h=50;t.position=n(t.val+m*t.step*Math.max(v,Math.min(h,Math.ceil((e.max-e.min)/10/t.step))));break}}}function V(){}function A(){}function l(a){t.sliderPressed=!0,"touches"in a?(window.addEventListener("touchmove",b,q),window.addEventListener("touchend",w,{once:!0})):(window.addEventListener("mousemove",b,q),window.addEventListener("mouseup",w,{once:!0})),a.stopPropagation(),a.preventDefault()}function w(){t.sliderPressed=!1,window.removeEventListener("touchmove",b),window.removeEventListener("mousemove",b)}function k(a){b(a)}function b(a){var v;const{value:u}=f(a),m=ae(u);(v=t.thumbEl)==null||v.focus(),t.position!==m&&(t.position=m)}return{handleKeyDown:x,handleFocus:V,handleBlur:A,handleMouseDown:l,handleClick:k,getThumbPosition:o,getThumbTransform:d,getShiftedChange:p}}function _({min:e=0,max:t=100,...n}){const{disabled:f,onChange:o,onChangeAfter:d}=n,p=s.useRef(null),x=s.useRef(null),{mountedHook:V,unmountedHook:A}=te();s.useEffect(()=>{if(p.current)return V(p.current,v),()=>A()},[p]);const[l,w]=s.useState(n.value),[k,b]=s.useState(n.value),[a,u]=s.useState(n.value),[m,v]=s.useState({left:0,width:0}),[h,j]=s.useState(!1);s.useEffect(()=>{l!==n.value&&(o==null||o(l))},[n.value,l,o]),s.useEffect(()=>{h||l!==k&&(b(l),d==null||d(l))},[d,h,l,k]);const W=s.useMemo(()=>n.step||1,[n]),G={get position(){return a},set position(i){u(i)},get sliderPressed(){return h},set sliderPressed(i){j(i)},get val(){return l},set val(i){w(i)},get thumbEl(){return x.current},get dimensions(){return m},get step(){return W}},{handleKeyDown:J,handleFocus:Q,handleBlur:Y,handleMouseDown:D,handleClick:E,getThumbPosition:P,getThumbTransform:S,getShiftedChange:Z}=ue({props:{min:e,max:t,...n},sliderState:G}),H=s.useMemo(P,[P]),$=s.useMemo(()=>({left:0,right:100-H+"%"}),[H]),N=s.useMemo(S,[S]),ee=s.useMemo(()=>({transform:"translateX("+N+"px)"}),[N]);return s.useEffect(()=>{if(a===n.value)return;const i=n.step?Z(a):a;w(i)},[a,n.value,n.step]),s.useEffect(()=>{h||a===n.value||l===n.value||u(n.value)},[h,n.value]),r.jsxs("div",{className:g.wrapper,children:[r.jsx("div",{ref:p,className:R({[g.track]:!0,[g.trackDisabled]:f}),onClick:E}),r.jsx("div",{className:R({[g.activeTrack]:!f,[g.activeTrackDisabled]:f}),style:$,onClick:E}),r.jsx("div",{role:"slider",tabIndex:0,className:R({[g.thumb]:!0,[g.thumbDisabled]:f,[g.thumbEnabled]:!f}),ref:x,style:ee,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"],"aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":l,"aria-valuetext":n["aria-valuetext"],onMouseDown:i=>{D(i)},onTouchStart:i=>{D(i)},onBlur:Y,onFocus:Q,onKeyDown:i=>{J(i)}})]})}_.__docgenInfo={description:"",methods:[],displayName:"Slider",props:{max:{required:!1,tsType:{name:"number"},description:`The greatest value in the range of permitted values
@default 100`,defaultValue:{value:"100",computed:!1}},min:{required:!1,tsType:{name:"number"},description:`The lowest value in the range of permitted values
@default 0`,defaultValue:{value:"0",computed:!1}},step:{required:!0,tsType:{name:"number"},description:"Specifies the value granularity"},value:{required:!0,tsType:{name:"number"},description:"The current value"},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the slider is disabled"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:"Handler that is called when the value of the slider changes"},onChangeAfter:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:`Handler that is called after moving the slider has ended. Will only be
called if the action resulted in a change.`},"aria-label":{required:!1,tsType:{name:"string"},description:"String value that labels the slider"},"aria-labelledby":{required:!1,tsType:{name:"string"},description:"Identifies the element that labels the slider"},"aria-valuetext":{required:!1,tsType:{name:"string"},description:"Human readable text alternative for the value"}}};const ce={title:"Forms/Slider"},y=()=>{const[e,t]=s.useState(25e5);return r.jsxs("div",{children:[r.jsx("output",{children:e}),r.jsx(_,{onChange:n=>t(n),value:e,min:1e3,max:1e7,step:1e3}),r.jsx("button",{onClick:()=>t(25e5),children:"Reset"})]})},M=()=>{const[e,t]=s.useState(625e3);return r.jsxs("div",{children:[r.jsx("output",{children:e}),r.jsx(_,{onChange:n=>t(n),value:e,disabled:!0,min:1e3,max:1e7,step:1e3})]})},C=()=>{const[e,t]=s.useState(625e3),[n,f]=s.useState(e);return r.jsxs("div",{children:[r.jsx("output",{children:n}),r.jsx(_,{onChange:o=>t(o),onChangeAfter:o=>f(o),value:e,min:1e3,max:1e7,step:1e3})]})};y.__docgenInfo={description:"",methods:[],displayName:"Regular"};M.__docgenInfo={description:"",methods:[],displayName:"Disabled"};C.__docgenInfo={description:"",methods:[],displayName:"ChangeAfter"};var L,B,F;y.parameters={...y.parameters,docs:{...(L=y.parameters)==null?void 0:L.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(2_500_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={value => setValue(value)} value={value} min={1000} max={10_000_000} step={1000} />
      <button onClick={() => setValue(2_500_000)}>Reset</button>
    </div>;
}`,...(F=(B=y.parameters)==null?void 0:B.docs)==null?void 0:F.source}}};var I,O,K;M.parameters={...M.parameters,docs:{...(I=M.parameters)==null?void 0:I.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={val => setValue(val)} value={value} disabled min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(K=(O=M.parameters)==null?void 0:O.docs)==null?void 0:K.source}}};var X,z,U;C.parameters={...C.parameters,docs:{...(X=C.parameters)==null?void 0:X.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  const [valueAfter, setValueAfter] = React.useState(value);
  return <div>
      <output>{valueAfter}</output>
      <Slider onChange={val => setValue(val)} onChangeAfter={val => setValueAfter(val)} value={value} min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(U=(z=C.parameters)==null?void 0:z.docs)==null?void 0:U.source}}};const de=["Regular","Disabled","ChangeAfter"];export{C as ChangeAfter,M as Disabled,y as Regular,de as __namedExportsOrder,ce as default};
