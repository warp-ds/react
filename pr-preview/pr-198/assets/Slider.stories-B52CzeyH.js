import{j as i,d as b}from"./index-Qu8W46vS.js";import{r as s}from"./index-BwDkhjyp.js";import{r as R}from"./index.m-CtIADANO.js";import"./_commonjsHelpers-BosuxZz1.js";const $=()=>{let e;const t=o=>h=>{const{left:f,width:w}=h[0].target.getBoundingClientRect();o({left:f,width:w-24})};return{mountedHook:(o,h)=>{h(o.getBoundingClientRect()),e=new ResizeObserver(t(h)),e.observe(o)},unmountedHook:()=>{e.disconnect()}}},c=Object.freeze({up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",pageup:"PageUp",pagedown:"PageDown"}),ee=Object.values(c),N={passive:!0};function te(e,t=2){const n=t?Math.pow(10,t):1;return Math.round(e*n)/n}const ne=e=>Number.isFinite(parseFloat(e)),ae=(e,{min:t,max:n})=>ne(e)?Math.min(Math.max(Number(e),t),n):t;let M={counter:0,repeatsBeforeAcceleration:3};function se({props:e,sliderState:t}){const n=a=>ae(a,{max:e.max,min:e.min});function m(a){const{left:r,width:u}=t.dimensions,d="touches"in a?a.touches[0].clientX:a.clientX;let x=Math.min(Math.max((d-r-16)/u,0),1)||0;return{value:e.min+x*(e.max-e.min)}}const o=()=>(t.position-e.min)/(e.max-e.min)*100,h=()=>o()/100*t.dimensions.width,f=a=>{const r=1/t.step;return Math.floor(a*r)/r};function w(a){const r=a.key;if(!(e.disabled||!ee.includes(r)))switch(a.preventDefault(),r){case c.left:case c.right:case c.up:case c.down:{const u=r===c.right||r===c.up?1:-1;let d=t.step;if(!e.preventAcceleration)if(a.repeat){M.counter++;const x=Math.min((M.counter-M.repeatsBeforeAcceleration)/100,.2);d=Math.max(t.step,Math.ceil((u>0?e.max-t.val:t.val-e.min)*x))}else M.counter=0;t.position=n(t.val+u*d);break}case c.home:t.position=e.min;break;case c.end:t.position=e.max;break;case c.pageup:case c.pagedown:{const u=r===c.pageup?1:-1,d=2,x=50;t.position=n(t.val+u*t.step*Math.max(d,Math.min(x,Math.ceil((e.max-e.min)/10/t.step))));break}}}function A(){}function j(){}function v(a){t.sliderPressed=!0,"touches"in a?(window.addEventListener("touchmove",g,N),window.addEventListener("touchend",y,{once:!0})):(window.addEventListener("mousemove",g,N),window.addEventListener("mouseup",y,{once:!0})),a.stopPropagation(),a.preventDefault()}function y(){t.sliderPressed=!1,window.removeEventListener("touchmove",g),window.removeEventListener("mousemove",g)}function p(a){g(a)}function g(a){var d;const{value:r}=m(a),u=te(r);(d=t.thumbEl)==null||d.focus(),t.position!==u&&(t.position=u)}return{handleKeyDown:w,handleFocus:A,handleBlur:j,handleMouseDown:v,handleClick:p,getThumbPosition:o,getThumbTransform:h,getShiftedChange:f}}function C({min:e=0,max:t=100,...n}){const{disabled:m,onChange:o,onChangeAfter:h}=n,f=s.useRef(null),w=s.useRef(null),{mountedHook:A,unmountedHook:j}=$();s.useEffect(()=>{if(f.current)return A(f.current,r),()=>j()},[f]);const[v,y]=s.useState(n.value),[p,g]=s.useState(n.value),[a,r]=s.useState({left:0,width:0}),[u,d]=s.useState(!1);s.useEffect(()=>{o&&o(v)},[v,o]),s.useEffect(()=>{u||h&&h(v)},[h,u,v]);const x=s.useMemo(()=>n.step||1,[n]),D={get position(){return p},set position(l){g(l)},get sliderPressed(){return u},set sliderPressed(l){d(l)},get val(){return v},set val(l){y(l)},get thumbEl(){return w.current},get dimensions(){return a},get step(){return x}},{handleKeyDown:W,handleFocus:G,handleBlur:J,handleMouseDown:E,handleClick:P,getThumbPosition:S,getThumbTransform:T,getShiftedChange:Q}=se({props:{min:e,max:t,...n},sliderState:D}),H=s.useMemo(S,[S]),Y=s.useMemo(()=>({left:0,right:100-H+"%"}),[H]),q=s.useMemo(T,[T]),Z=s.useMemo(()=>({transform:"translateX("+q+"px)"}),[q]);return s.useEffect(()=>{if(p===n.value)return;const l=n.step?Q(p):p;v!==l&&y(l)},[p,n.value,n.step]),s.useEffect(()=>{u||p===n.value||v===n.value||g(n.value)},[u,n.value]),i.jsxs("div",{className:b.wrapper,children:[i.jsx("div",{ref:f,className:R({[b.track]:!0,[b.trackDisabled]:m}),onClick:P}),i.jsx("div",{className:R({[b.activeTrack]:!m,[b.activeTrackDisabled]:m}),style:Y,onClick:P}),i.jsx("div",{role:"slider",tabIndex:0,className:R({[b.thumb]:!0,[b.thumbDisabled]:m,[b.thumbEnabled]:!m}),ref:w,style:Z,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"],"aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":v,"aria-valuetext":n["aria-valuetext"],onMouseDown:l=>{E(l)},onTouchStart:l=>{E(l)},onBlur:J,onFocus:G,onKeyDown:l=>{W(l)}})]})}try{C.displayName="Slider",C.__docgenInfo={description:"",displayName:"Slider",props:{max:{defaultValue:{value:"100"},description:"The greatest value in the range of permitted values",name:"max",required:!1,type:{name:"number"}},min:{defaultValue:{value:"0"},description:"The lowest value in the range of permitted values",name:"min",required:!1,type:{name:"number"}},step:{defaultValue:null,description:"Specifies the value granularity",name:"step",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"The current value",name:"value",required:!0,type:{name:"number"}},disabled:{defaultValue:null,description:"Whether the slider is disabled",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Handler that is called when the value of the slider changes",name:"onChange",required:!1,type:{name:"((value: number) => void)"}},onChangeAfter:{defaultValue:null,description:`Handler that is called after moving the slider has ended. Will only be
called if the action resulted in a change.`,name:"onChangeAfter",required:!1,type:{name:"((value: number) => void)"}},"aria-label":{defaultValue:null,description:"String value that labels the slider",name:"aria-label",required:!1,type:{name:"string"}},"aria-labelledby":{defaultValue:null,description:"Identifies the element that labels the slider",name:"aria-labelledby",required:!1,type:{name:"string"}},"aria-valuetext":{defaultValue:null,description:"Human readable text alternative for the value",name:"aria-valuetext",required:!1,type:{name:"string"}}}}}catch{}const ie={title:"Forms/Slider"},V=()=>{const[e,t]=s.useState(25e5);return i.jsxs("div",{children:[i.jsx("output",{children:e}),i.jsx(C,{onChange:n=>t(n),value:e,min:1e3,max:1e7,step:1e3}),i.jsx("button",{onClick:()=>t(25e5),children:"Reset"})]})},k=()=>{const[e,t]=s.useState(625e3);return i.jsxs("div",{children:[i.jsx("output",{children:e}),i.jsx(C,{onChange:n=>t(n),value:e,disabled:!0,min:1e3,max:1e7,step:1e3})]})},_=()=>{const[e,t]=s.useState(625e3),[n,m]=s.useState(e);return i.jsxs("div",{children:[i.jsx("output",{children:n}),i.jsx(C,{onChange:o=>t(o),onChangeAfter:o=>m(o),value:e,min:1e3,max:1e7,step:1e3})]})};var L,B,F;V.parameters={...V.parameters,docs:{...(L=V.parameters)==null?void 0:L.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(2_500_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={value => setValue(value)} value={value} min={1000} max={10_000_000} step={1000} />
      <button onClick={() => setValue(2_500_000)}>Reset</button>
    </div>;
}`,...(F=(B=V.parameters)==null?void 0:B.docs)==null?void 0:F.source}}};var O,K,X;k.parameters={...k.parameters,docs:{...(O=k.parameters)==null?void 0:O.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={val => setValue(val)} value={value} disabled min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(X=(K=k.parameters)==null?void 0:K.docs)==null?void 0:X.source}}};var z,I,U;_.parameters={..._.parameters,docs:{...(z=_.parameters)==null?void 0:z.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  const [valueAfter, setValueAfter] = React.useState(value);
  return <div>
      <output>{valueAfter}</output>
      <Slider onChange={val => setValue(val)} onChangeAfter={val => setValueAfter(val)} value={value} min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(U=(I=_.parameters)==null?void 0:I.docs)==null?void 0:U.source}}};const ce=["Regular","Disabled","ChangeAfter"];export{_ as ChangeAfter,k as Disabled,V as Regular,ce as __namedExportsOrder,ie as default};
