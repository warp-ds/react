import{d as h,j as d}from"./index-DXqnx8SZ.js";import{r as a}from"./index-RYns6xqu.js";import{r as E}from"./index.m-CtIADANO.js";const oe=()=>{let e;const t=u=>f=>{const{left:p,width:g}=f[0].target.getBoundingClientRect();u({left:p,width:g-24})};return{mountedHook:(u,f)=>{f(u.getBoundingClientRect()),e=new ResizeObserver(t(f)),e.observe(u)},unmountedHook:()=>{e.disconnect()}}},v=Object.freeze({up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",pageup:"PageUp",pagedown:"PageDown"}),re=Object.values(v),L={passive:!0};function ue(e,t=2){const s=t?Math.pow(10,t):1;return Math.round(e*s)/s}const ie=e=>Number.isFinite(parseFloat(e)),le=(e,{min:t,max:s})=>ie(e)?Math.min(Math.max(Number(e),t),s):t;let R={counter:0,repeatsBeforeAcceleration:3};function ce({props:e,sliderState:t}){const s=n=>le(n,{max:e.max,min:e.min});function r(n){const{left:l,width:o}=t.dimensions,m="touches"in n?n.touches[0].clientX:n.clientX;let x=Math.min(Math.max((m-l-16)/o,0),1)||0;return{value:e.min+x*(e.max-e.min)}}const u=()=>(t.position-e.min)/(e.max-e.min)*100,f=()=>u()/100*t.dimensions.width,p=n=>{const l=1/t.step;return Math.floor(n*l)/l};function g(n){const l=n.key;if(!(e.disabled||!re.includes(l)))switch(n.preventDefault(),l){case v.left:case v.right:case v.up:case v.down:{const o=l===v.right||l===v.up?1:-1;let m=t.step;if(!e.preventAcceleration)if(n.repeat){R.counter++;const x=Math.min((R.counter-R.repeatsBeforeAcceleration)/100,.2);m=Math.max(t.step,Math.ceil((o>0?e.max-t.val:t.val-e.min)*x))}else R.counter=0;t.position=s(t.val+o*m);break}case v.home:t.position=e.min;break;case v.end:t.position=e.max;break;case v.pageup:case v.pagedown:{const o=l===v.pageup?1:-1,m=2,x=50;t.position=s(t.val+o*t.step*Math.max(m,Math.min(x,Math.ceil((e.max-e.min)/10/t.step))));break}}}function w(){}function _(){}function D(n){t.sliderPressed=!0,"touches"in n?(window.addEventListener("touchmove",b,L),window.addEventListener("touchend",C,{once:!0})):(window.addEventListener("mousemove",b,L),window.addEventListener("mouseup",C,{once:!0})),n.stopPropagation(),n.preventDefault()}function C(){t.sliderPressed=!1,window.removeEventListener("touchmove",b),window.removeEventListener("mousemove",b)}function i(n){b(n)}function b(n){var m;const{value:l}=r(n),o=ue(l);(m=t.thumbEl)==null||m.focus(),t.position!==o&&(t.position=o)}return{handleKeyDown:g,handleFocus:w,handleBlur:_,handleMouseDown:D,handleClick:i,getThumbPosition:u,getThumbTransform:f,getShiftedChange:p}}function j({min:e=0,max:t=100,step:s=1,value:r,disabled:u,onChange:f,onChangeAfter:p,...g}){const w=a.useRef(null),_=a.useRef(null),{mountedHook:D,unmountedHook:C}=oe();a.useEffect(()=>{if(w.current)return D(w.current,A),()=>C()},[w]);const[i,b]=a.useState(r),[n,l]=a.useState(r),[o,m]=a.useState(r),[x,A]=a.useState({left:0,width:0}),[y,$]=a.useState(!1),G=a.useMemo(()=>({get position(){return o},set position(c){m(c)},get sliderPressed(){return y},set sliderPressed(c){$(c)},get val(){return i},set val(c){b(c)},get thumbEl(){return _.current},get dimensions(){return x},get step(){return s}}),[o,y,i,x,s]),{handleKeyDown:J,handleFocus:Q,handleBlur:Y,handleMouseDown:P,handleClick:S,getThumbPosition:H,getThumbTransform:N,getShiftedChange:Z}=ce({props:{min:e,max:t,step:s,...g},sliderState:G});a.useEffect(()=>{i!==r&&(f==null||f(i))},[i,r,f]),a.useEffect(()=>{!y&&i!==n&&(l(i),p==null||p(i))},[p,y,i,n]),a.useEffect(()=>{if(o!==r){const c=s?Z(o):o;c!==i&&b(c)}},[o,r,s]),a.useEffect(()=>{!y&&o!==r&&i!==r&&m(r)},[y,r]);const V=a.useMemo(H,[H]),ee=a.useMemo(()=>({left:0,right:`${100-V}%`}),[V]),q=a.useMemo(N,[N]),te=a.useMemo(()=>({transform:`translateX(${q}px)`}),[q]),ne=E(h.track,u&&h.trackDisabled),ae=E(h.activeTrack,u?h.activeTrackDisabled:h.activeTrackEnabled),se=E(h.thumb,u?h.thumbDisabled:h.thumbEnabled);return d.jsxs("div",{className:h.wrapper,children:[d.jsx("div",{ref:w,className:ne,onClick:S}),d.jsx("div",{className:ae,style:ee,onClick:S}),d.jsx("div",{role:"slider",tabIndex:0,className:se,ref:_,style:te,"aria-label":g["aria-label"],"aria-labelledby":g["aria-labelledby"],"aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":i,"aria-valuetext":g["aria-valuetext"],onMouseDown:c=>P(c),onTouchStart:c=>P(c),onBlur:Y,onFocus:Q,onKeyDown:c=>J(c)})]})}j.__docgenInfo={description:"",methods:[],displayName:"Slider",props:{max:{required:!1,tsType:{name:"number"},description:`The greatest value in the range of permitted values
@default 100`,defaultValue:{value:"100",computed:!1}},min:{required:!1,tsType:{name:"number"},description:`The lowest value in the range of permitted values
@default 0`,defaultValue:{value:"0",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"Specifies the value granularity",defaultValue:{value:"1",computed:!1}},value:{required:!0,tsType:{name:"number"},description:"The current value"},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the slider is disabled"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:"Handler that is called when the value of the slider changes"},onChangeAfter:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:`Handler that is called after moving the slider has ended. Will only be
called if the action resulted in a change.`},"aria-label":{required:!1,tsType:{name:"string"},description:"String value that labels the slider"},"aria-labelledby":{required:!1,tsType:{name:"string"},description:"Identifies the element that labels the slider"},"aria-valuetext":{required:!1,tsType:{name:"string"},description:"Human readable text alternative for the value"}}};const fe={title:"Forms/Slider"},k=()=>{const[e,t]=a.useState(25e5);return d.jsxs("div",{children:[d.jsx("output",{children:e}),d.jsx(j,{onChange:s=>t(s),value:e,min:1e3,max:1e7,step:1e3}),d.jsx("button",{onClick:()=>t(25e5),children:"Reset"})]})},M=()=>{const[e,t]=a.useState(625e3);return d.jsxs("div",{children:[d.jsx("output",{children:e}),d.jsx(j,{onChange:s=>t(s),value:e,disabled:!0,min:1e3,max:1e7,step:1e3})]})},T=()=>{const[e,t]=a.useState(625e3),[s,r]=a.useState(e);return d.jsxs("div",{children:[d.jsx("output",{children:s}),d.jsx(j,{onChange:u=>t(u),onChangeAfter:u=>r(u),value:e,min:1e3,max:1e7,step:1e3})]})};k.__docgenInfo={description:"",methods:[],displayName:"Regular"};M.__docgenInfo={description:"",methods:[],displayName:"Disabled"};T.__docgenInfo={description:"",methods:[],displayName:"ChangeAfter"};var B,F,I;k.parameters={...k.parameters,docs:{...(B=k.parameters)==null?void 0:B.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(2_500_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={value => setValue(value)} value={value} min={1000} max={10_000_000} step={1000} />
      <button onClick={() => setValue(2_500_000)}>Reset</button>
    </div>;
}`,...(I=(F=k.parameters)==null?void 0:F.docs)==null?void 0:I.source}}};var O,K,X;M.parameters={...M.parameters,docs:{...(O=M.parameters)==null?void 0:O.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={val => setValue(val)} value={value} disabled min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(X=(K=M.parameters)==null?void 0:K.docs)==null?void 0:X.source}}};var z,U,W;T.parameters={...T.parameters,docs:{...(z=T.parameters)==null?void 0:z.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  const [valueAfter, setValueAfter] = React.useState(value);
  return <div>
      <output>{valueAfter}</output>
      <Slider onChange={val => setValue(val)} onChangeAfter={val => setValueAfter(val)} value={value} min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(W=(U=T.parameters)==null?void 0:U.docs)==null?void 0:W.source}}};const he=["Regular","Disabled","ChangeAfter"];export{T as ChangeAfter,M as Disabled,k as Regular,he as __namedExportsOrder,fe as default};
