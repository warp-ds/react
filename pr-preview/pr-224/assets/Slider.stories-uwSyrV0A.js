import{j as m,d as g}from"./index-4T9h8ufS.js";import{r as s}from"./index-DogsOklH.js";import{r as R}from"./index.m-0-FAh1ao.js";const W=()=>{let t;const e=r=>l=>{const{left:x,width:v}=l[0].target.getBoundingClientRect();r({left:x,width:v-24})};return{mountedHook:(r,l)=>{l(r.getBoundingClientRect()),t=new ResizeObserver(e(l)),t.observe(r)},unmountedHook:()=>{t.disconnect()}}},u=Object.freeze({up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",pageup:"PageUp",pagedown:"PageDown"}),G=Object.values(u),A={passive:!0};function J(t,e=2){const n=e?Math.pow(10,e):1;return Math.round(t*n)/n}const Q=t=>Number.isFinite(parseFloat(t)),Y=(t,{min:e,max:n})=>Q(t)?Math.min(Math.max(Number(t),e),n):e;function Z({props:t,sliderState:e}){const n=a=>Y(a,{max:t.max,min:t.min});function h(a){const{left:o,width:c}=e.dimensions,d="touches"in a?a.touches[0].clientX:a.clientX;let w=Math.min(Math.max((d-o-16)/c,0),1)||0;return{value:t.min+w*(t.max-t.min)}}const r=()=>(e.position-t.min)/(t.max-t.min)*100,l=()=>r()/100*e.dimensions.width,x=a=>{const o=1/e.step;return Math.floor(a*o)/o},v={counter:0,repeatsBeforeAcceleration:3};function C(a){const o=a.key;if(!(t.disabled||!G.includes(o)))switch(a.preventDefault(),o){case u.left:case u.right:case u.up:case u.down:{const c=o===u.right||o===u.up?1:-1;let d=e.step;if(!t.preventAcceleration)if(a.repeat){v.counter++;const w=Math.min((v.counter-v.repeatsBeforeAcceleration)/100,.2);d=Math.max(e.step,Math.ceil((c>0?t.max-e.val:e.val-t.min)*w))}else v.counter=0;e.position=n(e.val+c*d);break}case u.home:e.position=t.min;break;case u.end:e.position=t.max;break;case u.pageup:case u.pagedown:{const c=o===u.pageup?1:-1,d=2,w=50;e.position=n(e.val+c*e.step*Math.max(d,Math.min(w,Math.ceil((t.max-t.min)/10/e.step))));break}}}function p(){}function T(){}function f(a){e.sliderPressed=!0,"touches"in a?(window.addEventListener("touchmove",b,A),window.addEventListener("touchend",y,{once:!0})):(window.addEventListener("mousemove",b,A),window.addEventListener("mouseup",y,{once:!0})),a.stopPropagation(),a.preventDefault()}function y(){e.sliderPressed=!1,window.removeEventListener("touchmove",b),window.removeEventListener("mousemove",b)}function D(a){b(a)}function b(a){var d;const{value:o}=h(a),c=J(o);(d=e.thumbEl)==null||d.focus(),e.position!==c&&(e.position=c)}return{handleKeyDown:C,handleFocus:p,handleBlur:T,handleMouseDown:f,handleClick:D,getThumbPosition:r,getThumbTransform:l,getShiftedChange:x}}function _({min:t=0,max:e=100,...n}){const{disabled:h,onChange:r}=n,l=s.useRef(null),x=s.useRef(null),{mountedHook:v,unmountedHook:C}=W();s.useEffect(()=>{if(l.current)return v(l.current,b),()=>C()},[l]);const[p,T]=s.useState(n.value),[f,y]=s.useState(n.value),[D,b]=s.useState({left:0,width:0}),[a,o]=s.useState(!1);s.useEffect(()=>{r&&r(p)},[p,r]);const c=s.useMemo(()=>n.step||1,[n]),d={get position(){return f},set position(i){y(i)},get sliderPressed(){return a},set sliderPressed(i){o(i)},get val(){return p},set val(i){T(i)},get thumbEl(){return x.current},get dimensions(){return D},get step(){return c}},{handleKeyDown:w,handleFocus:E,handleBlur:K,handleMouseDown:j,handleClick:P,getThumbPosition:V,getThumbTransform:H,getShiftedChange:X}=Z({props:{min:t,max:e,...n},sliderState:d}),N=s.useMemo(V,[V]),z=s.useMemo(()=>({left:0,right:100-N+"%"}),[N]),q=s.useMemo(H,[H]),U=s.useMemo(()=>({transform:"translateX("+q+"px)"}),[q]);return s.useEffect(()=>{if(f===n.value)return;const i=n.step?X(f):f;p!==i&&T(i)},[f,n.value,n.step]),s.useEffect(()=>{a||f===n.value||p===n.value||y(n.value)},[a,n.value]),m.jsxs("div",{className:g.wrapper,children:[m.jsx("div",{ref:l,className:R({[g.track]:!0,[g.trackDisabled]:h}),onClick:P}),m.jsx("div",{className:R({[g.activeTrack]:!h,[g.activeTrackDisabled]:h}),style:z,onClick:P}),m.jsx("div",{role:"slider",tabIndex:0,className:R({[g.thumb]:!0,[g.thumbDisabled]:h,[g.thumbEnabled]:!h}),ref:x,style:U,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"],"aria-valuemin":t,"aria-valuemax":e,"aria-valuenow":p,"aria-valuetext":n["aria-valuetext"],onMouseDown:i=>{j(i)},onTouchStart:i=>{j(i)},onBlur:K,onFocus:E,onKeyDown:i=>{w(i)}})]})}_.__docgenInfo={description:"",methods:[],displayName:"Slider",props:{max:{required:!1,tsType:{name:"number"},description:`The greatest value in the range of permitted values
@default 100`,defaultValue:{value:"100",computed:!1}},min:{required:!1,tsType:{name:"number"},description:`The lowest value in the range of permitted values
@default 0`,defaultValue:{value:"0",computed:!1}},step:{required:!0,tsType:{name:"number"},description:"Specifies the value granularity"},value:{required:!0,tsType:{name:"number"},description:"The current value"},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the slider is disabled"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:"Handler that is called when the value of the slider changes"},"aria-label":{required:!1,tsType:{name:"string"},description:"String value that labels the slider"},"aria-labelledby":{required:!1,tsType:{name:"string"},description:"Identifies the element that labels the slider"},"aria-valuetext":{required:!1,tsType:{name:"string"},description:"Human readable text alternative for the value"}}};const ne={title:"Forms/Slider"},M=()=>{const[t,e]=s.useState(25e5);return m.jsxs("div",{children:[m.jsx("output",{children:t}),m.jsx(_,{onChange:n=>e(n),value:t,min:1e3,max:1e7,step:1e3}),m.jsx("button",{onClick:()=>e(25e5),children:"Reset"})]})},k=()=>{const[t,e]=s.useState(625e3);return m.jsxs("div",{children:[m.jsx("output",{children:t}),m.jsx(_,{onChange:n=>e(n),value:t,disabled:!0,min:1e3,max:1e7,step:1e3})]})};M.__docgenInfo={description:"",methods:[],displayName:"Regular"};k.__docgenInfo={description:"",methods:[],displayName:"Disabled"};var L,B,S;M.parameters={...M.parameters,docs:{...(L=M.parameters)==null?void 0:L.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(2_500_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={value => setValue(value)} value={value} min={1000} max={10_000_000} step={1000} />
      <button onClick={() => setValue(2_500_000)}>Reset</button>
    </div>;
}`,...(S=(B=M.parameters)==null?void 0:B.docs)==null?void 0:S.source}}};var F,O,I;k.parameters={...k.parameters,docs:{...(F=k.parameters)==null?void 0:F.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={val => setValue(val)} value={value} disabled min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(I=(O=k.parameters)==null?void 0:O.docs)==null?void 0:I.source}}};const ae=["Regular","Disabled"];export{k as Disabled,M as Regular,ae as __namedExportsOrder,ne as default};
