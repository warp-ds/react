import{j as l,d as b}from"./index-lTKFmHqk.js";import{r as s}from"./index-CBqU2yxZ.js";import{r as R}from"./index.m-CtIADANO.js";import"./_commonjsHelpers-BosuxZz1.js";const Z=()=>{let e;const t=u=>h=>{const{left:g,width:f}=h[0].target.getBoundingClientRect();u({left:g,width:f-24})};return{mountedHook:(u,h)=>{h(u.getBoundingClientRect()),e=new ResizeObserver(t(h)),e.observe(u)},unmountedHook:()=>{e.disconnect()}}},i=Object.freeze({up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",pageup:"PageUp",pagedown:"PageDown"}),$=Object.values(i),N={passive:!0};function ee(e,t=2){const n=t?Math.pow(10,t):1;return Math.round(e*n)/n}const te=e=>Number.isFinite(parseFloat(e)),ne=(e,{min:t,max:n})=>te(e)?Math.min(Math.max(Number(e),t),n):t;function ae({props:e,sliderState:t}){const n=a=>ne(a,{max:e.max,min:e.min});function m(a){const{left:o,width:c}=t.dimensions,d="touches"in a?a.touches[0].clientX:a.clientX;let w=Math.min(Math.max((d-o-16)/c,0),1)||0;return{value:e.min+w*(e.max-e.min)}}const u=()=>(t.position-e.min)/(e.max-e.min)*100,h=()=>u()/100*t.dimensions.width,g=a=>{const o=1/t.step;return Math.floor(a*o)/o},f={counter:0,repeatsBeforeAcceleration:3};function A(a){const o=a.key;if(!(e.disabled||!$.includes(o)))switch(a.preventDefault(),o){case i.left:case i.right:case i.up:case i.down:{const c=o===i.right||o===i.up?1:-1;let d=t.step;if(!e.preventAcceleration)if(a.repeat){f.counter++;const w=Math.min((f.counter-f.repeatsBeforeAcceleration)/100,.2);d=Math.max(t.step,Math.ceil((c>0?e.max-t.val:t.val-e.min)*w))}else f.counter=0;t.position=n(t.val+c*d);break}case i.home:t.position=e.min;break;case i.end:t.position=e.max;break;case i.pageup:case i.pagedown:{const c=o===i.pageup?1:-1,d=2,w=50;t.position=n(t.val+c*t.step*Math.max(d,Math.min(w,Math.ceil((e.max-e.min)/10/t.step))));break}}}function j(){}function v(){}function C(a){t.sliderPressed=!0,"touches"in a?(window.addEventListener("touchmove",x,N),window.addEventListener("touchend",p,{once:!0})):(window.addEventListener("mousemove",x,N),window.addEventListener("mouseup",p,{once:!0})),a.stopPropagation(),a.preventDefault()}function p(){t.sliderPressed=!1,window.removeEventListener("touchmove",x),window.removeEventListener("mousemove",x)}function M(a){x(a)}function x(a){var d;const{value:o}=m(a),c=ee(o);(d=t.thumbEl)==null||d.focus(),t.position!==c&&(t.position=c)}return{handleKeyDown:A,handleFocus:j,handleBlur:v,handleMouseDown:C,handleClick:M,getThumbPosition:u,getThumbTransform:h,getShiftedChange:g}}function y({min:e=0,max:t=100,...n}){const{disabled:m,onChange:u,onChangeAfter:h}=n,g=s.useRef(null),f=s.useRef(null),{mountedHook:A,unmountedHook:j}=Z();s.useEffect(()=>{if(g.current)return A(g.current,a),()=>j()},[g]);const[v,C]=s.useState(n.value),[p,M]=s.useState(n.value),[x,a]=s.useState({left:0,width:0}),[o,c]=s.useState(!1);s.useEffect(()=>{u&&u(v)},[v,u]),s.useEffect(()=>{o||h&&h(v)},[h,o,v]);const d=s.useMemo(()=>n.step||1,[n]),w={get position(){return p},set position(r){M(r)},get sliderPressed(){return o},set sliderPressed(r){c(r)},get val(){return v},set val(r){C(r)},get thumbEl(){return f.current},get dimensions(){return x},get step(){return d}},{handleKeyDown:D,handleFocus:W,handleBlur:G,handleMouseDown:E,handleClick:P,getThumbPosition:S,getThumbTransform:T,getShiftedChange:J}=ae({props:{min:e,max:t,...n},sliderState:w}),H=s.useMemo(S,[S]),Q=s.useMemo(()=>({left:0,right:100-H+"%"}),[H]),q=s.useMemo(T,[T]),Y=s.useMemo(()=>({transform:"translateX("+q+"px)"}),[q]);return s.useEffect(()=>{if(p===n.value)return;const r=n.step?J(p):p;v!==r&&C(r)},[p,n.value,n.step]),s.useEffect(()=>{o||p===n.value||v===n.value||M(n.value)},[o,n.value]),l.jsxs("div",{className:b.wrapper,children:[l.jsx("div",{ref:g,className:R({[b.track]:!0,[b.trackDisabled]:m}),onClick:P}),l.jsx("div",{className:R({[b.activeTrack]:!m,[b.activeTrackDisabled]:m}),style:Q,onClick:P}),l.jsx("div",{role:"slider",tabIndex:0,className:R({[b.thumb]:!0,[b.thumbDisabled]:m,[b.thumbEnabled]:!m}),ref:f,style:Y,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"],"aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":v,"aria-valuetext":n["aria-valuetext"],onMouseDown:r=>{E(r)},onTouchStart:r=>{E(r)},onBlur:G,onFocus:W,onKeyDown:r=>{D(r)}})]})}try{y.displayName="Slider",y.__docgenInfo={description:"",displayName:"Slider",props:{max:{defaultValue:{value:"100"},description:"The greatest value in the range of permitted values",name:"max",required:!1,type:{name:"number"}},min:{defaultValue:{value:"0"},description:"The lowest value in the range of permitted values",name:"min",required:!1,type:{name:"number"}},step:{defaultValue:null,description:"Specifies the value granularity",name:"step",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"The current value",name:"value",required:!0,type:{name:"number"}},disabled:{defaultValue:null,description:"Whether the slider is disabled",name:"disabled",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Handler that is called when the value of the slider changes",name:"onChange",required:!1,type:{name:"((value: number) => void)"}},onChangeAfter:{defaultValue:null,description:`Handler that is called after moving the slider has ended. Will only be
called if the action resulted in a change.`,name:"onChangeAfter",required:!1,type:{name:"((value: number) => void)"}},"aria-label":{defaultValue:null,description:"String value that labels the slider",name:"aria-label",required:!1,type:{name:"string"}},"aria-labelledby":{defaultValue:null,description:"Identifies the element that labels the slider",name:"aria-labelledby",required:!1,type:{name:"string"}},"aria-valuetext":{defaultValue:null,description:"Human readable text alternative for the value",name:"aria-valuetext",required:!1,type:{name:"string"}}}}}catch{}const le={title:"Forms/Slider"},V=()=>{const[e,t]=s.useState(25e5);return l.jsxs("div",{children:[l.jsx("output",{children:e}),l.jsx(y,{onChange:n=>t(n),value:e,min:1e3,max:1e7,step:1e3}),l.jsx("button",{onClick:()=>t(25e5),children:"Reset"})]})},k=()=>{const[e,t]=s.useState(625e3);return l.jsxs("div",{children:[l.jsx("output",{children:e}),l.jsx(y,{onChange:n=>t(n),value:e,disabled:!0,min:1e3,max:1e7,step:1e3})]})},_=()=>{const[e,t]=s.useState(625e3),[n,m]=s.useState(e);return l.jsxs("div",{children:[l.jsx("output",{children:n}),l.jsx(y,{onChange:u=>t(u),onChangeAfter:u=>m(u),value:e,min:1e3,max:1e7,step:1e3})]})};var L,B,F;V.parameters={...V.parameters,docs:{...(L=V.parameters)==null?void 0:L.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(2_500_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={value => setValue(value)} value={value} min={1000} max={10_000_000} step={1000} />
      <button onClick={() => setValue(2_500_000)}>Reset</button>
    </div>;
}`,...(F=(B=V.parameters)==null?void 0:B.docs)==null?void 0:F.source}}};var O,K,X;k.parameters={...k.parameters,docs:{...(O=k.parameters)==null?void 0:O.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  return <div>
      <output>{value}</output>
      <Slider onChange={val => setValue(val)} value={value} disabled min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(X=(K=k.parameters)==null?void 0:K.docs)==null?void 0:X.source}}};var z,I,U;_.parameters={..._.parameters,docs:{...(z=_.parameters)==null?void 0:z.docs,source:{originalSource:`() => {
  const [value, setValue] = React.useState(625_000);
  const [valueAfter, setValueAfter] = React.useState(value);
  return <div>
      <output>{valueAfter}</output>
      <Slider onChange={val => setValue(val)} onChangeAfter={val => setValueAfter(val)} value={value} min={1000} max={10_000_000} step={1000} />
    </div>;
}`,...(U=(I=_.parameters)==null?void 0:I.docs)==null?void 0:U.source}}};const ie=["Regular","Disabled","ChangeAfter"];export{_ as ChangeAfter,k as Disabled,V as Regular,ie as __namedExportsOrder,le as default};
